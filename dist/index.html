<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <main>
    <style>

    </style>
    <div id="calendar">
      <div>{{month}}</div>
      <table border="1">
        <thead>
          <tr>
            <th v-for="date in weekList">{{date}}</th>
          </tr>
        </thead>
        <tbody>
          <!-- <tr v-for="(item, key1) in week" v-if="tdLastDate(key1)" v-bind:class="['tr-' + [key1 + 1]]">
            <td v-for="(days, key2) in daysTable" v-html="tdContent(key2, days.date)" v-if="tdCount(key2)"></td>
          </tr> -->
          <tr v-for="(item, key1) in week" v-if="tdLastDate(key1)" v-bind:class="['tr-' + [key1 + 1]]">
            <td v-for="(days, key2) in daysTable" v-if="tdCount(key2,key1)" v-html="tdContent(key2, days.date)"></td>
          </tr>
        </tbody>
      </table>
    </div><!-- #calendar -->
  </main>
  <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script>

    //当月を取得
    var today = new Date();
    var year = today.getFullYear();
    var month = today.getMonth()+ 1;
    var month_eng_list = ['January','February.','March','April','May','June','July','August','September','October','November','December'];
    var month_eng = month_eng_list[month - 1];

    var endOfMonth = new Date(year, month, 0)
    // var daysTable = new Array(31,28,31,30,31,30,31,31,30,31,30,31);
    // if (((year%4)==0 && (year%100)!=0) || (year%400)==0){
    //   daysTable[1] = 29;
    // }
    var a = 1;

    new Vue({
      el: '#calendar',
      data: {
        year: year,
        month: month,
        month_eng: month_eng,
        weekList: ['日','月','火','水','木','金','土'],
        daysTable: [
        {"date":"2018-10-01","image1":"0","image2":"0"},
        {"date":"2018-10-02","image1":"1","image2":"0"},
        {"date":"2018-10-03","image1":"0","image2":"0"},
        {"date":"2018-10-04","image1":"0","image2":"0"},
        {"date":"2018-10-05","image1":"0","image2":"0"},
        {"date":"2018-10-06","image1":"0","image2":"4"},
        {"date":"2018-10-07","image1":"0","image2":"5"},
        {"date":"2018-10-08","image1":"0","image2":"0"},
        {"date":"2018-10-09","image1":"1","image2":"0"},
        {"date":"2018-10-10","image1":"1","image2":"6"},
        {"date":"2018-10-11","image1":"0","image2":"0"},
        {"date":"2018-10-12","image1":"1","image2":"0"},
        {"date":"2018-10-13","image1":"0","image2":"0"},
        {"date":"2018-10-14","image1":"0","image2":"0"},
        {"date":"2018-10-15","image1":"0","image2":"0"},
        {"date":"2018-10-16","image1":"0","image2":"0"},
        {"date":"2018-10-17","image1":"0","image2":"0"},
        {"date":"2018-10-18","image1":"0","image2":"4"},
        {"date":"2018-10-19","image1":"1","image2":"5"},
        {"date":"2018-10-20","image1":"1","image2":"6"},
        {"date":"2018-10-21","image1":"0","image2":"0"},
        {"date":"2018-10-22","image1":"1","image2":"0"},
        {"date":"2018-10-23","image1":"0","image2":"0"},
        {"date":"2018-10-24","image1":"0","image2":"0"},
        {"date":"2018-10-25","image1":"0","image2":"0"},
        {"date":"2018-10-26","image1":"0","image2":"0"},
        {"date":"2018-10-27","image1":"0","image2":"0"},
        {"date":"2018-10-28","image1":"0","image2":"0"},
        {"date":"2018-10-29","image1":"1","image2":"0"},
        {"date":"2018-10-30","image1":"1","image2":"4"},
        {"date":"2018-10-31","image1":"0","image2":"5"}],
        week:['1','2','3','4','5','6'],
      },
      methods:{
        calDate: function(day){
          var d = day.substr(-2);
          var zero = '0';

          if(!d.indexOf(zero)){
            var d = d.substr(1);
          }
          return d;
        },
        tdContent: function(day, test){
          console.log(test);
          return a++
        },
        tdLastDate: function(day){
          var eom = endOfMonth.getDate();
          var loop = Math.floor((today.getDate() - today.getDay() + 12 ) / 7);

          if (day <= loop) {
            return true
          } else {
            return false
          }
        },
        tdCount: function(day, week){
          var test = day + week + 6 * week;
          
          if (day <= 6 && week == 0) {
            return true
          } else if (test <= 13 && week == 1) {
            return true
          } else if (test <= 20 && week == 2) {
            return true
          } else if (test <= 27 && week == 3) {
            return true
          } else if (test <= 30 && week == 4) {
            return true
          } else {
            return false
          }
        },
      },
      month: {
        month: month,
      },
    });
  </script>


</body>
</html>
